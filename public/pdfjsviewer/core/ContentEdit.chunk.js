/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[7],{140:function(Ca,ua,x){function pa(Pa,Qa,Ka,Aa){return Object(ea.b)(void 0,void 0,void 0,function(){var La,Ga,Ha,za,Ba,Ta,Ua,Wa,ab;return Object(ea.d)(this,function(cb){switch(cb.label){case 0:return La=Fa.getDocument(),Ga=[1],[4,Object(fa.c)(Qa,{extension:"pdf"})];case 1:return Ha=cb.fa(),za=Fa.Da(),Ua=(Ta=va.a).a7,[4,Ha.Kx()];case 2:return Ba=Ua.apply(Ta,[cb.fa().xfdfString,Pa]),Wa=!0,[4,La.Kf(Ha,Ga,Pa,Wa)];case 3:return cb.fa(),
[4,La.zg([Pa+1],Wa)];case 4:return cb.fa(),ab=za.Zg().filter(function(hb){return hb.CN()&&hb.PageNumber===Pa}),za.vs(ab,{force:!0,source:"contentEditTool"}),[4,za.fN(Ba)];case 5:return cb.fa(),Fa.getDocument().OF(),Fa.NF(Pa),Fa.ae(),ha(Pa),n(Pa,Ka.galleys,Aa),n(Pa,Ka.objects,Aa),[2]}})})}function la(Pa){Pa=(new DOMParser).parseFromString(Pa,"text/html").documentElement.querySelector("body");Pa.querySelectorAll("p").forEach(function(Qa){Qa.querySelectorAll("span").forEach(function(La){var Ga=La.getAttribute("style");
Ga=ka(Ga,La.innerHTML);La.innerHTML=Ga});var Ka=Qa.getAttribute("style"),Aa=Qa.innerHTML.replaceAll("<br>","");Qa.innerHTML=ka(Ka,Aa)});return Pa.innerHTML.trim()}function ka(Pa,Qa){Pa.includes("bold")&&(Qa="<strong>"+Qa+"</strong>");Pa.includes("italic")&&(Qa="<em>"+Qa+"</em>");Pa.includes("text-decoration: underline")&&(Qa="<u>"+Qa+"</u>");return Qa}function ha(Pa){var Qa=Fa.Da(),Ka=Qa.Zg().filter(function(Aa){return Aa.rt()&&Aa.PageNumber===Pa});Qa.vs(Ka,{force:!0,source:"contentEditTool"})}function da(Pa,
Qa){Qa.forEach(function(Ka){Oa[Pa]||(Oa[Pa]=[]);Oa[Pa].find(function(Aa){return Aa.id===Ka.id})||Oa[Pa].push(Ka)})}function z(Pa,Qa){Qa.forEach(function(Ka){Ja[Pa]||(Ja[Pa]=[]);Ja[Pa].find(function(Aa){return Aa.id===Ka.id})||Ja[Pa].push(Ka)})}function r(Pa){var Qa=new DOMParser,Ka=Qa.parseFromString(Pa,"text/xml");Ka.querySelector("parsererror")&&(Ka=Qa.parseFromString("<Root>"+Pa+"</Root>","text/xml"));Ka.querySelectorAll("a").forEach(function(Aa){var La=Aa.childNodes[0];Array.from(Aa.querySelectorAll("*")).find(function(Ga){return"u"===
Ga.tagName.toLowerCase()})||(Aa=document.createElement("u"),La.after(Aa),Aa.appendChild(La))});return(new XMLSerializer).serializeToString(Ka)}function w(Pa,Qa,Ka,Aa){this.top=Pa;this.left=Qa;this.bottom=Ka;this.right=Aa;this.topVal=function(){return Math.round(this.top)};this.bottomVal=function(){return Math.round(this.bottom)};this.leftVal=function(){return Math.round(this.left)};this.rightVal=function(){return Math.round(this.right)};this.height=function(){return Math.round(Math.abs(this.top-this.bottom))};
this.width=function(){return Math.round(this.right-this.left)};this.nK=function(La){return this.topVal()!=La.topVal()||this.leftVal()!=La.leftVal()||this.bottomVal()!=La.bottomVal()||this.rightVal()!=La.rightVal()}}function h(Pa,Qa,Ka,Aa,La){this.id=Pa;this.pagenum=Qa;this.galleysContents=Ka;this.contents=Aa;this.galleyBox=La}function a(Pa,Qa,Ka,Aa){this.id=Qa;this.type=Pa;this.bbox=Ka;this.pagenum=Aa}function b(Pa,Qa,Ka,Aa,La){this.id=Pa;this.pagecount=Qa;this.pageBBox=Ka;this.galleys=Aa;this.objects=
La}function e(Pa,Qa,Ka,Aa,La){var Ga=[];(new DOMParser).parseFromString(Aa,"text/html").documentElement.querySelectorAll("p").forEach(function(Ta,Ua){Ga[Ua]=Ta.innerHTML});Ka=(new DOMParser).parseFromString(Ka,"text/html");var Ha=null;Ka.documentElement.querySelectorAll("p").forEach(function(Ta,Ua){Ua<Ga.length?(Ta.innerHTML=Ga[Ua],Ha=Ta.getAttribute("style"),Ha=Ha.replace("font:italic","font:normal"),Ha=Ha.replace(" bold "," normal "),Ha=Ha.replace("underline:1;","underline:0;"),Ta.setAttribute("style",
Ha)):Ta.remove()});for(Aa=Ka.documentElement.querySelectorAll("p").length;Aa<Ga.length;Aa++){var za=document.createElement("p");za.setAttribute("id","0");za.innerHTML=Ga[Aa];null!=Ha&&za.setAttribute("style",Ha);Ka.documentElement.querySelector("body").appendChild(za)}Ka=Ka.documentElement.querySelector("body").innerHTML;var Ba="";Ja[Pa].forEach(function(Ta){Ta.id==La&&(Ba=Ta)});if(""==Ba)return"";Qa="<DOC id='"+Qa.id+"' pagecount='"+Qa.pagecount+"'>";Qa=Qa+("<STORY galley_ids='"+La+"' pagenum='"+
Pa+"'><galleys>")+(Ba.galleysContents+"</galleys>");Ba.contents=Ka;Qa=Qa+Ka+"\n</STORY>";return Qa+="</DOC>"}function n(Pa,Qa,Ka){var Aa=[],La=Fa.getDocument(),Ga=null;Qa.forEach(function(Ha){if(Ha instanceof a){var za=La.rl(Pa,Ha.bbox.leftVal(),Ha.bbox.topVal());var Ba=za.x;var Ta=za.y;var Ua=La.rl(Pa,Ha.bbox.rightVal(),Ha.bbox.bottomVal());za=Ua.x;Ua=Ua.y}else if(Ha instanceof h)za=La.rl(Pa,Ha.galleyBox.leftVal(),Ha.galleyBox.topVal()),Ba=za.x,Ta=za.y,Ua=La.rl(Pa,Ha.galleyBox.rightVal(),Ha.galleyBox.bottomVal()),
za=Ua.x,Ua=Ua.y;else return;var Wa=new window.Core.Annotations.RectangleAnnotation,ab=ta.a.OBJECT;Ha instanceof h&&(ab=ta.a.TEXT);Wa.v9(Ha,ab);Wa.PageNumber=Ha.pagenum;Wa.X=Ba;Wa.Y=Ta;Wa.Width=za-Ba;Wa.Height=Ua-Ta;Wa.StrokeColor=new ja.a("#3183C8");Wa.FillColor=new ja.a(255,255,255,.01);Wa.Style="dash";Wa.Dashes="4,3";Wa.eL();Wa.selectionModel=na.a;Aa.push(Wa);"undefined"!==typeof Ka&&Ka===Ha.id&&(Ga=Wa)});Qa=Fa.Da();Qa.zm(Aa);Ga&&Qa.Yn(Ga);Qa.rj(Aa)}function f(Pa,Qa,Ka){return Object(ea.b)(this,
void 0,void 0,function(){var Aa,La,Ga,Ha,za;return Object(ea.d)(this,function(Ba){switch(Ba.label){case 0:Aa=Pa.data;Ga=Aa.cmd;switch(Ga){case "isReady":return[3,1];case "initialiseInfixServer":return[3,3];case "exportFile":return[3,4];case "importText":return[3,5];case "transformObject":return[3,5];case "deleteObject":return[3,6]}return[3,7];case 1:return[4,Object(qa.b)()];case 2:return Ha=Ba.fa(),sa.postMessage({cmd:"initialiseInfixServer",l:Ha}),[3,7];case 3:return(za=y(Aa.resultsXML))?Qa():Ka("License key does not have content edit permission"),
[3,7];case 4:return Aa.exportPerformed?ba(Aa.pageNumber,Aa.exportXML,Aa.objectXML,Aa.resultsXML):(La=Ia[Aa.pageNumber],z(Aa.pageNumber,La.galleys),da(Aa.pageNumber,La.objects),ha(Aa.pageNumber),n(Aa.pageNumber,La.galleys),n(Aa.pageNumber,La.objects)),[3,7];case 5:return La=Ia[Aa.pageNumber],ca(Aa.pageNumber,Aa.resultsXML),pa(Aa.pageNumber,Aa.pdfBuffer,La,Aa.id),[3,7];case 6:return La=Ia[Aa.pageNumber],ca(Aa.pageNumber,Aa.resultsXML),La.galleys=La.galleys.filter(function(Ta){return Ta.id!==Aa.id}),
La.objects=La.objects.filter(function(Ta){return Ta.id!==Aa.id}),pa(Aa.pageNumber,Aa.pdfBuffer,La),[3,7];case 7:return[2]}})})}function y(Pa){Pa=new Uint8Array(Pa);var Qa=(new TextDecoder("utf-8")).decode(Pa);Pa=!1;Qa=(new DOMParser).parseFromString(Qa,"text/xml").getElementsByTagName("LicenseCheck");null!==Qa&&0<Qa.length&&(Qa=Qa[0].getElementsByTagName("Status")[0].innerHTML,"error"!=Qa&&"ok"==Qa&&(Pa=!0));return Pa}function ba(Pa,Qa,Ka,Aa){var La=new Uint8Array(Qa),Ga=new TextDecoder("utf-8");
Qa=Ga.decode(La);La=new Uint8Array(Ka);Ka=Ga.decode(La);La=new Uint8Array(Aa);Aa=Ga.decode(La);Ia[Pa]=ia(Pa,Qa,Ka,Aa);Aa=Ia[Pa];z(Pa,Aa.galleys);da(Pa,Aa.objects);ha(Pa);n(Pa,Aa.galleys);n(Pa,Aa.objects)}function aa(Pa,Qa){Pa=parseFloat(Pa);return isNaN(Qa)||Qa<Pa?Pa:Qa}function ia(Pa,Qa,Ka,Aa){var La;var Ga=new DOMParser;Aa=Ga.parseFromString(Aa,"text/xml");Array.prototype.slice.call(Aa.getElementsByTagName("BBox")).forEach(function(Ba){if("CropBox"==Ba.getAttribute("Name")){var Ta=parseFloat(Ba.getElementsByTagName("Top").item(0).innerHTML),
Ua=parseFloat(Ba.getElementsByTagName("Bottom").item(0).innerHTML),Wa=parseFloat(Ba.getElementsByTagName("Left").item(0).innerHTML);Ba=parseFloat(Ba.getElementsByTagName("Right").item(0).innerHTML);La=new w(Ta,Wa,Ua,Ba)}});Ga=new DOMParser;Aa=Ga.parseFromString(Qa,"text/xml");var Ha=[];Array.prototype.slice.call(Aa.getElementsByTagName("STORY")).forEach(function(Ba){var Ta=Ba.getAttribute("galley_ids"),Ua=Array.prototype.slice.call(Ba.getElementsByTagName("g"))[0],Wa=Ua.getAttribute("bbox").split(" ");
Wa=new w(parseFloat(Wa[0]),parseFloat(Wa[1]),parseFloat(Wa[2]),parseFloat(Wa[3]));Ua=Ua.innerHTML;var ab=Array.prototype.slice.call(Ba.getElementsByTagName("galleys"))[0];ab.parentNode.removeChild(ab);Ba=Ba.innerHTML;Ba=(new DOMParser).parseFromString(Ba,"text/html").documentElement.querySelector("body").innerHTML.trim();Ta=new h(Ta,Pa,Ua,Ba,Wa);Ha.push(Ta)});Ga=new DOMParser;var za=[];Qa=Ga.parseFromString(Ka,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(Qa).forEach(function(Ba){var Ta=
Ba.getAttribute("Type"),Ua=Ba.getAttribute("OID");Ba=Array.prototype.slice.call(Ba.getElementsByTagName("Point"));var Wa=Number.NaN,ab=Number.NaN,cb=Number.NaN,hb=Number.NaN;Ba.forEach(function(kb){var fb=kb.getAttribute("Name");"TL"==fb?(Wa=aa(kb.getAttribute("Y"),Wa),cb=aa(kb.getAttribute("X"),cb)):"TR"==fb?(Wa=aa(kb.getAttribute("Y"),Wa),hb=aa(kb.getAttribute("X"),hb)):"BR"==fb?(ab=aa(kb.getAttribute("Y"),ab),hb=aa(kb.getAttribute("X"),hb)):"BL"==fb&&(ab=aa(kb.getAttribute("Y"),ab),cb=aa(kb.getAttribute("X"),
cb))});Ba=new w(Wa,cb,ab,hb);Ta=new a(Ta,Ua,Ba,Pa);za.push(Ta)});Qa=Array.prototype.slice.call(Aa.getElementsByTagName("DOC"))[0].getAttribute("id");return new b(Qa,1,La,Ha,za)}function ca(Pa,Qa){var Ka;Qa=(new TextDecoder("utf-8")).decode(Qa);Qa=(new DOMParser).parseFromString(Qa,"text/xml");var Aa=Qa.getElementsByTagName("Galley").item(0);if(null!=Aa){var La=Aa.getAttribute("id");Aa=Qa.getElementsByTagName("BBox");Aa=Array.prototype.slice.call(Aa);Aa.forEach(function(Ha){var za=Ha.getElementsByTagName("Top"),
Ba=parseFloat(za.item(0).innerHTML);za=Ha.getElementsByTagName("Left");var Ta=parseFloat(za.item(0).innerHTML);za=Ha.getElementsByTagName("Bottom");var Ua=parseFloat(za.item(0).innerHTML);za=Ha.getElementsByTagName("Right");Ha=parseFloat(za.item(0).innerHTML);Ka=new w(Ba,Ta,Ua,Ha)});Ja[Pa].forEach(function(Ha){Ha.id==La&&1==Ka.nK(Ha.galleyBox)&&(Ha.galleyBox=Ka)})}Aa=Qa.getElementsByTagName("Object").item(0);if(null!=Aa){var Ga=Aa.getAttribute("OID");Aa=Qa.getElementsByTagName("BBox");Aa=Array.prototype.slice.call(Aa);
Aa.forEach(function(Ha){var za=Ha.getElementsByTagName("Top"),Ba=parseFloat(za.item(0).innerHTML);za=Ha.getElementsByTagName("Left");var Ta=parseFloat(za.item(0).innerHTML);za=Ha.getElementsByTagName("Bottom");var Ua=parseFloat(za.item(0).innerHTML);za=Ha.getElementsByTagName("Right");Ha=parseFloat(za.item(0).innerHTML);Ka=new w(Ba,Ta,Ua,Ha)});Oa[Pa].forEach(function(Ha){Ha.id==Ga&&1==Ka.nK(Ha.bbox)&&(Ha.bbox=Ka)})}}x.r(ua);var ea=x(2),fa=x(57),ja=x(14),na=x(411),ma=x(34),qa=x(66),ra=x(1),ta=x(246),
va=x(6),sa=null,Da=null,Ja={},Oa={},Ia={},Fa;ua["default"]={Y6:function(Pa){return Object(ea.b)(void 0,void 0,void 0,function(){return Object(ea.d)(this,function(){Da||(Fa=Pa,Da=new Promise(function(Qa,Ka){sa=new Worker(window.Core.getWorkerPath()+"contentEdit/InfixServerModule.js");sa.onmessage=function(Aa){f(Aa,Qa,Ka)};sa.postMessage({cmd:"isReady"})}));return[2,Da]})})},jga:function(Pa,Qa,Ka){return Object(ea.b)(void 0,void 0,void 0,function(){var Aa,La,Ga,Ha;return Object(ea.d)(this,function(za){switch(za.label){case 0:return ha(Qa),
Ja[Qa]=[],Oa[Qa]=[],[4,Pa.af([Qa])];case 1:return Aa=za.fa(),La=new TextEncoder,Ga=La.encode(""),Ha=Ga.buffer,sa.postMessage({cmd:"exportFile",pageNumber:Qa,performExport:Ka,pdfFile:Aa,tableData:Ha},[Aa,Ha]),[2]}})})},jda:function(Pa){return Object(ea.b)(void 0,void 0,void 0,function(){var Qa,Ka,Aa,La,Ga,Ha,za,Ba;return Object(ea.d)(this,function(Ta){switch(Ta.label){case 0:return Qa=Pa.id,Ka=Pa.isText,Aa=Pa.pageNumber,La=Fa.getDocument(),[4,La.af([Aa])];case 1:return Ga=Ta.fa(),Ha=new TextEncoder,
za=Ha.encode(""),Ba=za.buffer,sa.postMessage({cmd:"deleteObject",pdfFile:Ga,pageNumber:Aa,objectID:Qa,isText:Ka,tableData:Ba},[Ba]),[2]}})})},Bha:function(Pa){return Object(ea.b)(void 0,void 0,void 0,function(){var Qa,Ka,Aa,La,Ga,Ha,za,Ba,Ta,Ua,Wa,ab,cb;return Object(ea.d)(this,function(hb){switch(hb.label){case 0:return Qa=Pa.id,Ka=Pa.position,Aa=Ka.top,La=Ka.left,Ga=Ka.bottom,Ha=Ka.right,za=Pa.isText,Ba=Pa.pageNumber,Ta=Fa.getDocument(),[4,Ta.af([Ba])];case 1:return Ua=hb.fa(),Wa=new TextEncoder,
ab=Wa.encode(""),cb=ab.buffer,sa.postMessage({cmd:"transformObject",pdfFile:Ua,pageNumber:Ba,objectID:Qa,isText:za,topVal:Aa,leftVal:La,bottomVal:Ga,rightVal:Ha,tableData:cb},[cb]),[2]}})})},Haa:function(Pa,Qa){return Object(ea.b)(void 0,void 0,void 0,function(){var Ka,Aa,La,Ga,Ha,za,Ba,Ta,Ua,Wa,ab,cb,hb,kb,fb;return Object(ea.d)(this,function(lb){switch(lb.label){case 0:Ka=r(Qa);Ka=Ka.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,"$1");Aa=Pa.bB.id;La=Pa.PageNumber;Ga=Ia[La];
Ha=Ga.galleys.find(function(wb){return wb.id===Aa});za=la(Ha.contents);Ba=e(La,Ga,za,Ka,Aa);if(""==Ba)return[3,2];Ta=new TextEncoder;Ua=Ta.encode(Ba);Wa=Ua.buffer;ab=Object(ma.c)()||"https://www.pdftron.com/webfonts/v2/";cb=Fa.getDocument();return[4,cb.af([La])];case 1:return hb=lb.fa(),Ta=new TextEncoder,kb=Ta.encode(""),fb=kb.buffer,sa.postMessage({cmd:"importText",pdfFile:hb,pageNumber:La,webFontURL:ab,galleyId:Aa,importData:Wa,tableData:fb},[Wa,fb]),[3,3];case 2:Object(ra.g)("Unable to generate import XML"),
lb.label=3;case 3:return[2]}})})},n1:function(Pa){if(Pa)return la(Pa.contents);Object(ra.g)("Unable to extract document content")}}},411:function(Ca,ua,x){var pa=x(2);Ca=x(69);var la=x(45);x=function(ka){function ha(){return null!==ka&&ka.apply(this,arguments)||this}Object(pa.c)(ha,ka);ha.prototype.testSelection=function(da,z,r){return la.a.jj(da,z,r)};return ha}(Ca.a);ua.a=x}}]);}).call(this || window)
